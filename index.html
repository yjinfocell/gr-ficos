<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard ‚Äì Vendas por Vendedor FILIAL</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --panel:#111827; /* gray-900 */
      --muted:#94a3b8; /* slate-400 */
      --text:#e5e7eb; /* gray-200 */
      --accent:#22c55e; /* green-500 */
      --accent2:#3b82f6; /* blue-500 */
      --warn:#f59e0b; /* amber-500 */
      --danger:#ef4444; /* red-500 */
      --card:#0b1220;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:linear-gradient(180deg, var(--bg), #020617);
      color:var(--text); font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    header{
      padding:20px; display:flex; gap:12px; align-items:center; justify-content:space-between; border-bottom:1px solid #1f2937; position:sticky; top:0; background:rgba(2,6,23,.8); backdrop-filter: blur(6px); z-index:10;
    }
    header h1{font-size:20px; margin:0; font-weight:600}
    .wrap{display:grid; grid-template-columns:320px 1fr; min-height:calc(100vh - 64px)}
    @media (max-width: 1024px){ .wrap{grid-template-columns:1fr} }
    aside{
      border-right:1px solid #1f2937; padding:16px; max-height:calc(100vh - 64px); overflow:auto; background:rgba(2,6,23,.6);
    }
    .search{
      width:100%; padding:10px 12px; background:#0b1220; border:1px solid #1f2937; border-radius:10px; color:var(--text);
      outline:none; margin-bottom:12px;
    }
    .vendor{
      display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; cursor:pointer; color:#cbd5e1; border:1px solid transparent;
    }
    .vendor:hover{ background:#0b1220; border-color:#1f2937 }
    .vendor.active{ background:#0b1220; border-color:#334155; color:#fff }
    .pill{margin-left:auto; font-size:12px; padding:2px 8px; border-radius:999px; background:#0b1220; border:1px solid #1f2937; color:#a3e635}

    main{ padding:18px; }
    .panel{ background:linear-gradient(180deg, var(--panel), #0b1220); border:1px solid #1f2937; border-radius:16px; padding:16px; }
    .title{ display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; margin-bottom:10px }
    .title h2{ margin:0; font-size:18px }

    .grid{ display:grid; grid-template-columns:1fr; gap:16px }
    @media (min-width: 900px){ .grid{ grid-template-columns: 1fr 1fr } }

    .table{ width:100%; border-collapse:collapse; margin-top:10px; font-size:14px }
    .table th,.table td{ border-bottom:1px dashed #1f2937; padding:10px 8px; text-align:left }
    .table th{ color:#cbd5e1; font-weight:600 }
    .badge{ font-size:12px; padding:3px 8px; border:1px solid #1f2937; border-radius:999px; background:#0b1220 }

    .totals{ display:flex; gap:10px; flex-wrap:wrap }
    .kpi{ flex:1 1 180px; background:#0b1220; border:1px solid #1f2937; border-radius:12px; padding:10px }
    .kpi .k{ color:var(--muted); font-size:12px }
    .kpi .v{ font-weight:700; font-size:18px }

    footer{ color:#64748b; font-size:12px; text-align:center; padding:14px }
    .hint{ color:#94a3b8; font-size:12px }
    .note{ font-size:12px; color:#a3a3a3 
	.panel canvas {
  max-height: 300px; /* controla a altura m√°xima */
  width: 100% !important; /* mant√©m responsivo */
}
  </style>
</head>
<body>
  <header>
    <h1>Dashboard ‚Äì Vendas por Vendedor FILIAL</h1>
    <div class="hint">Clique em um vendedor para visualizar os gr√°ficos e a tabela.</div>
  </header>

  <div class="wrap">
    <aside>
      <input id="search" class="search" placeholder="Buscar vendedor..." />
      <div id="vendorList"></div>
    </aside>
    <main>
      <div class="panel">
        <div class="title">
          <h2 id="sellerName">Selecione um vendedor</h2>
          <span id="periodBadge" class="badge">Per√≠odo: Jan ‚Üí Ago (at√© 13/08)</span>
        </div>

        <div class="totals" id="totals"></div>

        <div class="grid">
          <div class="panel">
            <div class="title"><h2>Atacado</h2><span class="badge">Barras = Vendas ‚Ä¢ Linha = Recompensa</span></div>
            <canvas id="chartAtacado"></canvas>
            <table class="table" id="tableAtacado"></table>
          </div>
          <div class="panel">
            <div class="title"><h2>Varejo</h2><span class="badge">Barras = Vendas</span></div>
            <canvas id="chartVarejo"></canvas>
          </div>
        </div>
        <div class="note" style="margin-top:10px">Formata√ß√£o em R$ (pt-BR). Meses sem valor informado foram considerados 0.</div>
      </div>
    </main>
  </div>

  <footer>
    Feito com Chart.js ‚Ä¢ P√°gina √∫nica (sem servidor)
  </footer>

  <script>
    // ----------------------- Dados -----------------------
    const MESES = [
      "JANEIRO","FEVEREIRO","MAR√áO","ABRIL","MAIO","JUNHO","JULHO","AGOSTO (At√© dia 28/08)"
    ];

    // Helper para construir arrays do tamanho dos meses
    const Z = (arr) => MESES.map((_, i) => arr[i] ?? 0);

    const vendedoresRaw = {
      "ALEXANDRE LOPES": {
        varejo: Z([3770,1140,3148.8,2607,3225,7164,4740,1125]),
        atacado: Z([196964.7,153782.56,165504.9,185143.35,214774.85,189859.26,266051.33,198787.66]),
        faixaAtacado: Z(["0","0","0","0","0","R$ 176.000 a R$ 215.000","R$ 246.000 a R$ 275.000","R$ 176.000 a R$ 215.000"]),
        recompensaAtacado: Z([0,0,0,0,0,1100,1375,1100])
      },
      "AYALA GARCIA- ESTAGI√ÅRIO ATENDENTE": {
        varejo: Z([0,0,0,0,0,0,0,5640]),
        atacado: Z([0,0,0,0,0,0,0,6847.5]),
        faixaAtacado: Z(["0","0","0","0","0","0","0","0"]),
        recompensaAtacado: Z([0,0,0,0,0,0,0,0])
      },
      "CAROLYNE SOARES DA SILVA": {
        varejo: Z([0,0,0,16298,7694,10834.5,8136,8918]),
        atacado: Z([0,0,0,24867.5,12344.3,6898.7,19818,11864.4]),
        faixaAtacado: Z(["0","0","0","0","0","0","0","0"]),
        recompensaAtacado: Z([0,0,0,0,0,0,0,0])
      },
      "FELIPE HENRIQUE": {
        varejo: Z([5302,860,1198,3971,4454,6237,6377,923]),
        atacado: Z([100397.1,100097.7,38896.42,96242.9,96510.3,101409.5,110261.8,19503.3]),
        faixaAtacado: Z(["0","0","0","0","0","R$ 86.000 a R$ 115.000","R$ 86.000 a R$ 115.000","0"]),
        recompensaAtacado: Z([0,0,0,0,0,400,400,0])
      },
      "FERNANDA STHEPHANNY": {
        varejo: Z([0,0,0,0,0,0,8825,18039]),
        atacado: Z([0,0,0,0,0,0,23126.9,23663.15]),
        faixaAtacado: Z(["0","0","0","0","0","0","0","0"]),
        recompensaAtacado: Z([0,0,0,0,0,0,0,0])
      },
      "LUCAS VINICIUS": {
        varejo: Z([6402,1840,4295,4939,5859,4886,270,8765.5]),
        atacado: Z([29207,23489,20137.1,12502.5,18572.6,9324.2,982.5,17169.9]),
        faixaAtacado: Z(["0","0","0","0","0","0","0","0"]),
        recompensaAtacado: Z([0,0,0,0,0,0,0,0])
      },
      "MARIANA FRANCISCA DA SILVA": {
        varejo: Z([7216,2960,9157,13556,10216,8916,5441,800]),
        atacado: Z([71374.6,62889.07,84098.04,47881,60999,54714.55,69391.7,52551.8]),
        faixaAtacado: Z(["0","0","0","0","0","R$ 51.000 a R$ 85.000","R$ 51.000 a R$ 85.000","R$ 51.000 a R$ 85.000"]),
        recompensaAtacado: Z([0,0,0,0,0,300,300,300])
      },
      "VALDENIR": {
        varejo: Z([3527,1080,4440,4221,18403,5613.5,80,2077]),
        atacado: Z([71861.2,82306.1,91797.7,74168,57296.61,66953.1,756,71080.5]),
        faixaAtacado: Z(["0","0","0","0","0","R$ 51.000 a R$ 85.000","0","R$ 51.000 a R$ 85.000"]),
        recompensaAtacado: Z([0,0,0,0,0,300,0,300])
      },
		"WANESSA": {
        varejo: Z([0,0,0,0,0,0,0,720]),
        atacado: Z([0,0,0,0,0,0,0,7080.9]),
        faixaAtacado: Z(["0","0","0","0","0","0","0","0"]),
        recompensaAtacado: Z([0,0,0,0,0,0,0,0])
      },
    };

    // ----------------------- Utilidades -----------------------
    const fmtBRL = (n) => (n||0).toLocaleString('pt-BR', { style:'currency', currency:'BRL' });

    // Ordenar alfabeticamente as chaves
    const vendedores = Object.keys(vendedoresRaw).sort((a,b)=> a.localeCompare(b,'pt-BR',{sensitivity:'base'}));

    // ----------------------- UI: Lista de vendedores -----------------------
    const vendorListEl = document.getElementById('vendorList');
    const searchEl = document.getElementById('search');

    function renderVendorList(filter = ''){
      vendorListEl.innerHTML = '';
      const f = filter.trim().toLowerCase();
      vendedores.forEach(name => {
        if (f && !name.toLowerCase().includes(f)) return;
        const v = vendedoresRaw[name];
        // KPI r√°pido: soma do atacado no per√≠odo
        const totalAt = v.atacado.reduce((a,b)=>a+(b||0),0);
        const li = document.createElement('div');
        li.className = 'vendor';
        li.innerHTML = `<span>üë§</span><span>${name}</span>`;
        li.onclick = ()=> selectVendor(name, li);
        vendorListEl.appendChild(li);
      });
    }

    searchEl.addEventListener('input', e=> renderVendorList(e.target.value));

    // ----------------------- Charts -----------------------
    let chartAt = null, chartVar = null, activeItem = null;

    function buildAtacadoChart(ctx, meses, vendas, recompensa){
      if (chartAt) chartAt.destroy();
      chartAt = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: meses,
          datasets: [
            {
              label: 'Vendas Atacado (R$)',
              data: vendas,
              backgroundColor: 'rgba(59,130,246,0.7)',
              borderColor: 'rgba(59,130,246,1)',
              borderWidth: 1,
              yAxisID: 'y'
            },
            {
              label: 'Recompensa (R$)',
              data: recompensa,
              type: 'line',
              borderColor: 'rgba(239,68,68,1)',
              backgroundColor: 'rgba(239,68,68,0.25)',
              borderWidth: 2,
              pointRadius: 3,
              tension: .25,
              yAxisID: 'y1'
            }
          ]
        },
		Options: {
		  responsive: true,
		  maintainAspectRatio: true, // mant√©m propor√ß√£o
		  aspectRatio: 2, // deixa mais largo e achatado
		  interaction: { mode:'index', intersect:false },
          plugins: {
            legend: { labels:{ color:'#e5e7eb' } },
            tooltip: {
              callbacks: {
                label: (ctx)=> `${ctx.dataset.label}: ${fmtBRL(ctx.raw)}`
              }
            }
          },
          scales: {
            x: { ticks:{ color:'#cbd5e1' }, grid:{ color:'rgba(148,163,184,0.1)' } },
            y: {
              position:'left',
              ticks:{ color:'#cbd5e1', callback: (v)=> fmtBRL(v) },
              grid:{ color:'rgba(148,163,184,0.1)' }
            },
            y1: {
              position:'right',
              grid: { drawOnChartArea:false },
              ticks:{ color:'#cbd5e1', callback: (v)=> fmtBRL(v) }
            }
          }
        }
      });
    }

    function buildVarejoChart(ctx, meses, vendas){
      if (chartVar) chartVar.destroy();
      chartVar = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: meses,
          datasets: [
            {
              label: 'Vendas Varejo (R$)',
              data: vendas,
              backgroundColor: 'rgba(34,197,94,0.75)',
              borderColor: 'rgba(34,197,94,1)',
              borderWidth: 1
            }
          ]
        },
		Options: {
		  responsive: true,
		  maintainAspectRatio: true, // mant√©m propor√ß√£o
		  aspectRatio: 2, // mais largo, menos alto
		  plugins: {
			legend: { labels:{ color:'#e5e7eb' } },
			tooltip: {
			  callbacks: { label: (ctx)=> `${ctx.dataset.label}: ${fmtBRL(ctx.raw)}` }
            }
          },
          scales: {
            x: { ticks:{ color:'#cbd5e1' }, grid:{ color:'rgba(148,163,184,0.1)' } },
            y: { ticks:{ color:'#cbd5e1', callback:(v)=> fmtBRL(v) }, grid:{ color:'rgba(148,163,184,0.1)' } }
          }
        }
      });
    }

    // ----------------------- Tabela -----------------------
    const tableAtEl = document.getElementById('tableAtacado');
    function buildAtacadoTable(meses, vendas, faixa, recompensa){
      let html = `<thead><tr>
        <th>M√™s</th>
        <th>Vendas Atacado (R$)</th>
        <th>Faixa</th>
        <th>Recompensa (R$)</th>
      </tr></thead><tbody>`;
      meses.forEach((m, i)=>{
        const f = (faixa[i]||"0").toString();
        html += `<tr>
          <td>${m}</td>
          <td>${fmtBRL(vendas[i]||0)}</td>
          <td>${f === '0' ? '-' : f}</td>
          <td>${fmtBRL(recompensa[i]||0)}</td>
        </tr>`
      })
      html += `</tbody>`;
      tableAtEl.innerHTML = html;
    }

    // ----------------------- Totais -----------------------
    const totalsEl = document.getElementById('totals');
    function buildTotals(v){
      const totVar = v.varejo.reduce((a,b)=>a+(b||0),0);
      const totAta = v.atacado.reduce((a,b)=>a+(b||0),0);
      const totRec = v.recompensaAtacado.reduce((a,b)=>a+(b||0),0);
      totalsEl.innerHTML = `
        <div class="kpi"><div class="k">Total Varejo</div><div class="v">${fmtBRL(totVar)}</div></div>
        <div class="kpi"><div class="k">Total Atacado</div><div class="v">${fmtBRL(totAta)}</div></div>
        <div class="kpi"><div class="k">Total Recompensa (Atacado)</div><div class="v">${fmtBRL(totRec)}</div></div>
      `;
    }

    // ----------------------- Sele√ß√£o de vendedor -----------------------
    const sellerNameEl = document.getElementById('sellerName');
    const chAt = document.getElementById('chartAtacado');
    const chVr = document.getElementById('chartVarejo');

    function selectVendor(name, el){
      if (activeItem) activeItem.classList.remove('active');
      if (el) { activeItem = el; activeItem.classList.add('active'); }
      sellerNameEl.textContent = name;
      const v = vendedoresRaw[name];
      buildTotals(v);
      buildAtacadoChart(chAt.getContext('2d'), MESES, v.atacado, v.recompensaAtacado);
      buildVarejoChart(chVr.getContext('2d'), MESES, v.varejo);
      buildAtacadoTable(MESES, v.atacado, v.faixaAtacado, v.recompensaAtacado);
    }

    // Inicializar
    renderVendorList('');

    // Opcional: selecionar automaticamente o primeiro da lista
    const firstVendor = vendorListEl.querySelector('.vendor');
    if (firstVendor){ firstVendor.click(); }
  </script>
</body>
</html>








